wordpress置顶文章判断函数is_sticky()在CMS主题中的应用


在制作wordpress CMS主题模板中的大幻灯片时，我们习惯性地选择置顶文章。而在实际应用中发现，如果我们的wordpress网站设置显示5篇置顶文章于幻灯中，而网站所有的文章中没有置顶文章时，幻灯片会默认调用最新的5篇文章来作为幻灯片的文章，这样一来就有违我们“置顶文章”的初忠了。其实，我们大多情况想要的效果是：如果没有置顶文章时，就不显示幻灯；有置顶文章时才显示幻灯片。那么，如何才能做到这样的效果呢?
wordpress程序提供了一个非常有用的置顶函数用来判断是否是置顶——is_sticky()，这个函数非常有用，不仅可以判断某篇文章是否置顶，也可以在某些循环前作为文章的判断。下面以一个实例来作为解说。
<?php
query_posts(array('posts_per_page' => 5,'post__in' => get_option('sticky_posts')));
if (have_posts()&&is_sticky()) : //如果有 并且 是置顶文章
while (have_posts()) : the_post();
?>
显示置顶文章
<?php
endwhile; wp_reset_query();
endif;
?>
上面的代码中，我们在循环前，添加了一个判断：if (have_posts()&&is_sticky())，这句主要是判断是否有置顶文章，如果有了置顶文章，才会执行后面的循环语句。如果没有这句判断，在没有置顶文章的情况下，会自动调用最新的文章，这可能是wordpress程序默认就是这样处理的吧。但我们需要的是有置顶就显示，没置顶则不显示，所以，我们要加上这句判断语句。






